var S=Object.defineProperty;var h=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var m=(a,o,n)=>o in a?S(a,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[o]=n,f=(a,o)=>{for(var n in o||(o={}))x.call(o,n)&&m(a,n,o[n]);if(h)for(var n of h(o))z.call(o,n)&&m(a,n,o[n]);return a};(function(a,o){typeof exports=="object"&&typeof module!="undefined"?module.exports=o(require("vue"),require("axios")):typeof define=="function"&&define.amd?define(["vue","axios"],o):(a=typeof globalThis!="undefined"?globalThis:a||self,a.useAuth=o(a.Vue,a.axios))})(this,function(a,o){"use strict";function n(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var d=n(o);function g(){const r=a.ref(!1),u=a.ref(!1),l=a.ref(null);let e={axiosInstance:d.default,tokenKey:"token",storageKey:"token",authorizationScheme:"Bearer"};function y(s){return e=f(f({},e),s),e}function I(s,i){return u.value=!0,l.value=null,e.axiosInstance.post(s,{method:"POST",data:i}).then(t=>(e.axiosInstance.defaults.headers.common.Authorization=e.authorizationScheme+" "+t.data[e.tokenKey],i.remember?localStorage.setItem(e.storageKey,t.data[e.tokenKey]):sessionStorage.setItem(e.storageKey,t.data[e.tokenKey]),r.value=!0,t)).catch(t=>(l.value=t.response,c(),t)).finally(()=>u.value=!1)}function v(s,i){return u.value=!0,l.value=null,e.axiosInstance.post(s,{method:"POST",data:i}).then(t=>t).catch(t=>(l.value=t.response,c(),t)).finally(()=>u.value=!1)}function K(s){u.value=!0,l.value=null;let i=!1;return localStorage.getItem(e.storageKey)?(i=!0,e.axiosInstance.defaults.headers.common.Authorization=e.authorizationScheme+" "+localStorage.getItem(e.storageKey)):e.axiosInstance.defaults.headers.common.Authorization=e.authorizationScheme+" "+sessionStorage.getItem(e.storageKey),e.axiosInstance.get(s).then(t=>(e.axiosInstance.defaults.headers.common.Authorization=e.authorizationScheme+t.data[e.tokenKey],i?localStorage.setItem(e.storageKey,t.data[e.tokenKey]):sessionStorage.setItem(e.storageKey,t.data[e.tokenKey]),r.value=!0,t)).catch(t=>(c(),t)).finally(()=>u.value=!1)}function c(){e.axiosInstance.defaults.headers.common.Authorization=!1,localStorage.removeItem(e.storageKey),sessionStorage.removeItem(e.storageKey),r.value=!1}return{login:I,register:v,refresh:K,logout:c,init:y,isAuth:r,isLoading:u,error:l}}return g});
